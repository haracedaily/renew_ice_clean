<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Contact Us</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="stylesheet" href="./css/common.css">
    <link rel="stylesheet" href="./css/index.css">
    <link rel="stylesheet" href="./css/contact_us.css">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        // Supabase 클라이언트 초기화를 DOMContentLoaded 이벤트에서 실행
        document.addEventListener('DOMContentLoaded', function() {
            const supabaseUrl = 'https://wqetnltlnsvjidubewia.supabase.co';
            const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndxZXRubHRsbnN2amlkdWJld2lhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI3NzI5NDksImV4cCI6MjA1ODM0ODk0OX0.-Jw0jqyq93rA7t194Kq4_umPoTci8Eqx9j-oCwoZc6k';
            window.supabase = supabase.createClient(supabaseUrl, supabaseKey);
        });
    </script>
</head>
<body class="scroll-lock">

<header class="sticky top-0 z-40 w-full bg-white p-5">
    <nav class="flex items-center justify-between max-w-[1200px] mx-auto">
        <img src="/image/logo.png" class="cursor-pointer" onclick="location.href='/index.html'" alt="logo">
        <ul class="flex gap-8">
            <li><a href="/contact_us.html" class="nav-link">공지사항</a></li>
            <li><a href="/contact_us.html?pageNum=1&category_id=2" class="nav-link">FAQ</a></li>
            <li><a href="#" class="nav-link" onclick="checkLoginAndRedirect('/reservation.html')">예약하기</a></li>
            <li><a href="/mypage.html" class="nav-link" style="display: inline-flex; align-items: center; white-space: nowrap;"><img src="/image/mypage.png" alt="마이페이지" style="margin-right: 5px;"> MY</a></li>
        </ul>
    </nav>
    <div id="side_btn_group"
         class="w-[45px] h-[100px] rounded-[20px] z-50 absolute top-[70vh] right-10 flex flex-col justify-evenly items-center">
        <span class="w-[35px] h-[35px] rounded-[50%] border border-white flex justify-start items-center cursor-pointer"
              onclick="window.scrollTo({top:0,behavior:'smooth'})">
            <p class="text-white text-xl rotate-90 pb-[17px]">&lt;</p>
        </span>
        <span class="w-[35px] h-[35px] rounded-[50%] flex justify-center items-center bg-[url('/image/darkBalloon.png')] bg-no-repeat cursor-pointer"
              onclick="window.open('http://pf.kakao.com/_Kxgsxfn','_blank','width=500,height=630')">
            <p class="text-white text-xs font-bold tracking-[-0.5px] pl-[3px] pb-[2px]">Ch+</p>
        </span>
    </div>
</header>
<div id="container">

    <div class="main_text">
        <p id="changeText">공지사항</p>
    </div>

    <div class="post_list">
        <div id="board-div" class="content">
<!--            <table class="notice-table">-->
<!--                <thead>-->
<!--                <tr>-->
<!--                    <th>번호</th>-->
<!--                    <th>카테고리</th>-->
<!--                    <th>제목</th>-->
<!--                    <th class="notice-views">조회수</th>-->
<!--                    <th class="date">날짜</th>-->
<!--                </tr>-->
<!--                </thead>-->
<!--                <tbody id="board">-->

<!--                </tbody>-->
<!--            </table>-->
        </div>
<!--        <button onclick="postClick()" class="post-writing">글쓰기</button>-->
    </div>

    <div id="post-modal" class="post-modal-c hidden">
        <div class="post-modal-content">
            <div class="post-detail">
                <p>글작성</p>

                <label for="post-title">제목</label>
                <input type="text" id="post-title" placeholder="Please enter a title."/>

                <label for="post-category">카테고리</label>
                <select id="post-category">
                    <option value="1">공지</option>
                    <option value="2">FAQ</option>
                </select>

                <label for="post-name">작성자</label>
                <input type="text" id="post-name" placeholder="Please enter the author name."/>

                <label for="post-content">내용</label>
                <textarea id="post-content" placeholder="Please enter the contents."></textarea>

                <label for="post-image-url" class="file-upload-label"> 📁 파일 선택</label>
                <input type="file" id="post-image-url" name="file" accept="image/*"/>
                <span id="file-name">선택된 파일 없음</span>
                <img id="image-preview" style="max-width: 100%; margin-top: 10px; display: none;" alt="미리보기 이미지"/>

                <label for="post-password">비밀번호</label>
                <input type="password" id="post-password" value=""/>

                <div>
                    <div class="button-container">
                        <button id="submit-post">등록</button>
                        <button onclick="cancelModalClose()" id="cancel-post">취소</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="notice-modal" class="update-notice hidden">
        <div class="modal-div post-modal-content post-detail">
            <div>
                <p>글수정</p>
            </div>
            <div>
                <div>
                    <span>No.<h3 id="update-id"></h3></span>

                    <span>날짜<h3 id="update-date"></h3></span>

                    <span>조회수<h3 id="update-views"></h3></span>
                </div>
                제목 <input id="update-title" type="text" class="update-input">

                내용<textarea id="update-content"></textarea>

                작성자<input type="text" id="update-name"/>

                비밀번호 <input type="password" id="update-password" readonly/>

                카테고리
                <select id="update-category">
                    <option value="1">공지</option>
                    <option value="2">FAQ</option>
                    <option value="3">Q&A</option>
                </select>

                <p>업로드된 파일</p>
                <label for="post-image-url" class="file-upload-label"> 📁 파일 선택</label>
                <!--                <img id="update-image" src="" alt="Uploaded Image"/>-->
                <p id="update-file"></p>

            </div>
            <div class="button-container">
                <button id="submit-update">수정</button>
                <button onclick="noticemodalClose();" id="cancel-update">취소</button>
            </div>
        </div>
    </div>

    <div id="notice-detail-container" style="margin-top: 30px; display: none;">
        <h2 id="notice-title">제목</h2>
        <p id="notice-date">날짜</p>
        <hr>
        <img id="update-image" src="" alt="" style="max-width:100%; margin-bottom: 20px;">
        <div id="notice-content">내용</div>
        <div class="list_home">
            <button onclick="goBackToList()">목록으로</button>
        </div>
    </div>

    <div id="paging-container" class="post-paging"></div>

</div>

<script>
// 로그인 체크 및 리다이렉트 함수
function checkLoginAndRedirect(targetUrl) {
    // 로컬 스토리지에서 로그인 정보 확인
    const userInfo = localStorage.getItem('userInfo');
    const isLoggedIn = localStorage.getItem('isLoggedIn');
    
    if (!isLoggedIn || !userInfo) {
        // 로그인되지 않은 경우 로그인 페이지로 리다이렉트
        Swal.fire({
            icon: 'warning',
            title: '로그인이 필요합니다',
            text: '예약 서비스를 이용하려면 로그인이 필요합니다.',
            confirmButtonText: '로그인하기',
            showCancelButton: true,
            cancelButtonText: '취소',
            confirmButtonColor: '#0066CC',
            customClass: {
                icon: 'swal2-icon-custom'
            }
        }).then((result) => {
            if (result.isConfirmed) {
                // 로그인 페이지로 이동 (mypage.html이 로그인 페이지인 것으로 가정)
                window.location.href = '/mypage.html';
            }
        });
        return false;
    }
    
    // 로그인된 경우 목표 페이지로 이동
    window.location.href = targetUrl;
    return true;
}

// SweetAlert 아이콘 커스텀 스타일
const style = document.createElement('style');
style.textContent = `
    .swal2-icon-custom {
        color: #0066CC !important;
    }
    .swal2-icon-custom .swal2-icon-content {
        color: #0066CC !important;
    }
    div:where(.swal2-icon).swal2-warning {
        border-color: #0066CC !important;
    }
    div:where(.swal2-icon).swal2-warning [class^='swal2-warning-circular-line'] {
        border-color: #0066CC !important;
    }
`;
document.head.appendChild(style);
</script>

</body>
</html>
<script src="/js/contact_us.js"></script>